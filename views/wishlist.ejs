<%- include('partials/header') %>

<main class="container">
  <section class="wishlist-section">
    <div class="page-header">
      <h1>My Wishlist</h1>
      <p>Items you've saved for later</p>
    </div>

    <div class="wishlist-actions">
      <button class="btn btn-outline clear-wishlist">
        <i class="fas fa-trash-alt"></i> Clear Wishlist
      </button>
    </div>

    <!-- This container is where the JavaScript will render the wishlist items -->
    <div class="wishlist-items">
      <!-- Content will be dynamically generated by JavaScript -->
      <div class="loading-indicator">
        <i class="fas fa-spinner fa-spin"></i> Loading your wishlist...
      </div>
    </div>

    <!-- Empty state will be shown by JS when wishlist is empty -->
    <!-- Related products section -->
    <section class="related-products">
      <h2>You Might Also Like</h2>
      <div class="product-grid">
        <!-- Example product cards - in a real app, these would be dynamically generated -->
        <div class="product-card" data-product-id="prod1" data-product-name="Classic Loafers" data-product-price="35000" data-product-image="/api/placeholder/300/300">
          <div class="product-card-inner">
            <div class="product-image">
              <img src="/api/placeholder/300/300" alt="Classic Loafers">
              <div class="product-actions">
                <button class="wishlist-toggle" data-product-id="prod1" aria-label="Add to wishlist">
                  <i class="far fa-heart"></i>
                </button>
                <button class="add-to-cart" aria-label="Add to cart">
                  <i class="fas fa-shopping-cart"></i>
                </button>
              </div>
              <div class="product-badges">
                <span class="badge badge-new">New</span>
              </div>
            </div>
            <div class="product-details">
              <h3 class="product-name">Classic Loafers</h3>
              <div class="product-price">₦35,000</div>
              <div class="product-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
                <span class="rating-count">(12)</span>
              </div>
            </div>
          </div>
        </div>

        <div class="product-card" data-product-id="prod2" data-product-name="Oxford Brogues" data-product-price="42000" data-product-image="/api/placeholder/300/300">
          <div class="product-card-inner">
            <div class="product-image">
              <img src="/api/placeholder/300/300" alt="Oxford Brogues">
              <div class="product-actions">
                <button class="wishlist-toggle" data-product-id="prod2" aria-label="Add to wishlist">
                  <i class="far fa-heart"></i>
                </button>
                <button class="add-to-cart" aria-label="Add to cart">
                  <i class="fas fa-shopping-cart"></i>
                </button>
              </div>
              <div class="product-badges">
                <span class="badge badge-sale">Sale</span>
              </div>
            </div>
            <div class="product-details">
              <h3 class="product-name">Oxford Brogues</h3>
              <div class="product-price">
                <span class="sale-price">₦42,000</span>
                <span class="regular-price">₦52,000</span>
              </div>
              <div class="product-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <span class="rating-count">(21)</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </section>
</main>

<!-- Notification component for success/error messages -->
<div class="notification-container">
  <!-- Notifications will be added dynamically -->
</div>

<!-- Include necessary scripts -->
<script>
  // This ensures wishlist is initialized when the page loads
  document.addEventListener('DOMContentLoaded', function() {
    // The wishlist object is defined in your main JS file
    if (typeof wishlist !== 'undefined') {
      wishlist.init();
    } else {
      console.error('Wishlist functionality not available');
    }
  });
  
  // Function to show notifications (referenced in your main JS)
  function showNotification(message, type = 'info') {
    const notificationContainer = document.querySelector('.notification-container');
    if (!notificationContainer) return;
    
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
      <div class="notification-content">
        <p>${message}</p>
      </div>
      <button class="notification-close">
        <i class="fas fa-times"></i>
      </button>
    `;
    
    notificationContainer.appendChild(notification);
    
    // Add close button functionality
    const closeBtn = notification.querySelector('.notification-close');
    closeBtn.addEventListener('click', function() {
      notification.classList.add('notification-hiding');
      setTimeout(() => {
        notification.remove();
      }, 300);
    });
    
    // Auto-hide after 5 seconds
    setTimeout(() => {
      notification.classList.add('notification-hiding');
      setTimeout(() => {
        notification.remove();
      }, 300);
    }, 5000);
  }
</script>

<%- include('partials/footer') %>